(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var c=t(15),u=t.n(c),a=t(6),r=t(3),o=t(2),i=t(4),s=t.n(i),l="/api/persons",b=function(){return s.a.get(l).then((function(e){return e.data}))},j=function(e){return s.a.post(l,e).then((function(e){return e.data}))},d=function(e){return s.a.delete("".concat(l,"/").concat(e)).then((function(e){return e}))},h=function(e,n){return s.a.put("".concat(l,"/").concat(e),n).then((function(e){return e.data}))},f=t(0),m=function(e){var n=e.message,t=e.messageType;return null===n?null:Object(f.jsx)("div",{className:t,children:n})},O=function(e){var n=e.item,t=e.persons,c=e.setPersons;return Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)("p",{children:[n.name," ",n.number," ",Object(f.jsx)("button",{onClick:function(){return e=n.id,void(window.confirm("Do you want to delete ".concat(n.name," from the phone book?"))&&d(e).then((function(n){c(t.filter((function(n){return n.id!==e})))})));var e},children:"delete"})]})})},p=function(e){var n=e.title;return Object(f.jsx)("h2",{children:n})},v=function(e){return Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)("form",{onSubmit:e.onSubmit,children:[Object(f.jsxs)("div",{children:["name: ",Object(f.jsx)("input",{onChange:e.onChangeName,value:e.nameValue})]}),Object(f.jsxs)("div",{children:["number: ",Object(f.jsx)("input",{onChange:e.onChangeNumber,value:e.numberValue})]}),Object(f.jsx)("div",{children:Object(f.jsx)("button",{type:"submit",children:"add"})})]})})},x=function(e){return Object(f.jsxs)("div",{children:["filter shown with ",Object(f.jsx)("input",{onChange:e.onSearchChange,value:e.searchValue})]})},g=function(){var e=Object(o.useState)([]),n=Object(r.a)(e,2),t=n[0],c=n[1],u=Object(o.useState)(""),i=Object(r.a)(u,2),s=i[0],l=i[1],d=Object(o.useState)(""),g=Object(r.a)(d,2),w=g[0],C=g[1],S=Object(o.useState)(""),k=Object(r.a)(S,2),y=k[0],N=k[1],V=Object(o.useState)(!0),T=Object(r.a)(V,2),D=T[0],P=T[1],A=Object(o.useState)(null),E=Object(r.a)(A,2),F=E[0],I=E[1],J=Object(o.useState)("sucess"),L=Object(r.a)(J,2),B=L[0],U=L[1],q=D?t:t.filter((function(e){return e.name.toLowerCase().includes(y.toLowerCase())}));return Object(o.useEffect)((function(){b().then((function(e){return c(e)}))}),[]),Object(f.jsxs)("div",{children:[Object(f.jsx)(p,{title:"Phonebook"}),Object(f.jsx)(m,{message:F,messageType:B}),Object(f.jsx)(x,{onSearchChange:function(e){N(e.target.value),""===e.target.value?P(!0):P(!1)},searchValue:y}),Object(f.jsx)(p,{title:"Add a new"}),Object(f.jsx)(v,{onChangeName:function(e){l(e.target.value)},onChangeNumber:function(e){C(e.target.value)},nameValue:s,numberValue:w,onSubmit:function(e){e.preventDefault();var n=null,u=null;if(t.map((function(e){return e.name})).includes(s)){var r=t.find((function(e){return e.name===s}));if(window.confirm("".concat(s," is already added in the phonebook. Do you want to replace the old number with the new?"))){var o=Object(a.a)(Object(a.a)({},r),{},{number:w});h(r.id,o).then((function(e){c(t.map((function(n){return n.id!==r.id?n:e}))),n="Updated ".concat(s,"'s phone number."),u="sucess"})).catch((function(e){n="Information of ".concat(s," has already been removed from the server."),U(u="failure"),I(n),l(""),C(""),setTimeout((function(){return I(null)}),5e3)}))}}else{j({name:s,number:w}).then((function(e){c(t.concat(e))})),n="Added ".concat(s,"."),u="sucess"}l(""),C(""),null!==n&&(console.log(n),console.log(u),U(u),I(n),setTimeout((function(){return I(null)}),5e3))}}),Object(f.jsx)(p,{title:"Numbers"}),q.map((function(e){return Object(f.jsx)(O,{item:e,persons:t,setPersons:c},e.name)}))]})};t(39);u.a.render(Object(f.jsx)(g,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.67678e24.chunk.js.map