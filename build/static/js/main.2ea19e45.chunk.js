(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var r=t(15),a=t.n(r),c=t(6),u=t(3),o=t(2),i=t(4),s=t.n(i),b="/api/persons",d=function(){return s.a.get(b).then((function(e){return e.data}))},l=function(e){return s.a.post(b,e).then((function(e){return e.data}))},j=function(e){return s.a.delete("".concat(b,"/").concat(e)).then((function(e){return e}))},h=function(e,n){return s.a.put("".concat(b,"/").concat(e),n).then((function(e){return e.data}))},m=t(0),f=function(e){var n=e.message,t=e.messageType;return null===n?null:Object(m.jsx)("div",{className:t,children:n})},O=function(e){var n=e.item,t=e.persons,r=e.setPersons;return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("p",{children:[n.name," ",n.number," ",Object(m.jsx)("button",{onClick:function(){return e=n.id,void(window.confirm("Do you want to delete ".concat(n.name," from the phone book?"))&&j(e).then((function(n){r(t.filter((function(n){return n.id!==e})))})));var e},children:"delete"})]})})},p=function(e){var n=e.title;return Object(m.jsx)("h2",{children:n})},g=function(e){return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("form",{onSubmit:e.onSubmit,children:[Object(m.jsxs)("div",{children:["name: ",Object(m.jsx)("input",{onChange:e.onChangeName,value:e.nameValue})]}),Object(m.jsxs)("div",{children:["number: ",Object(m.jsx)("input",{onChange:e.onChangeNumber,value:e.numberValue})]}),Object(m.jsx)("div",{children:Object(m.jsx)("button",{type:"submit",children:"add"})})]})})},v=function(e){return Object(m.jsxs)("div",{children:["filter shown with ",Object(m.jsx)("input",{onChange:e.onSearchChange,value:e.searchValue})]})},x=function(){var e=Object(o.useState)([]),n=Object(u.a)(e,2),t=n[0],r=n[1],a=Object(o.useState)(""),i=Object(u.a)(a,2),s=i[0],b=i[1],j=Object(o.useState)(""),x=Object(u.a)(j,2),w=x[0],C=x[1],S=Object(o.useState)(""),N=Object(u.a)(S,2),k=N[0],y=N[1],T=Object(o.useState)(!0),V=Object(u.a)(T,2),D=V[0],P=V[1],A=Object(o.useState)(null),E=Object(u.a)(A,2),F=E[0],I=E[1],J=Object(o.useState)("sucess"),L=Object(u.a)(J,2),B=L[0],U=L[1],q=D?t:t.filter((function(e){return e.name.toLowerCase().includes(k.toLowerCase())}));return Object(o.useEffect)((function(){d().then((function(e){return r(e)}))}),[]),Object(m.jsxs)("div",{children:[Object(m.jsx)(p,{title:"Phonebook"}),Object(m.jsx)(f,{message:F,messageType:B}),Object(m.jsx)(v,{onSearchChange:function(e){y(e.target.value),""===e.target.value?P(!0):P(!1)},searchValue:k}),Object(m.jsx)(p,{title:"Add a new"}),Object(m.jsx)(g,{onChangeName:function(e){b(e.target.value)},onChangeNumber:function(e){C(e.target.value)},nameValue:s,numberValue:w,onSubmit:function(e){if(e.preventDefault(),t.map((function(e){return e.name})).includes(s)){var n=t.find((function(e){return e.name===s}));if(window.confirm("".concat(s," is already added in the phonebook. Do you want to replace the old number with the new?"))){var a=Object(c.a)(Object(c.a)({},n),{},{number:w});h(n.id,a).then((function(e){r(t.map((function(t){return t.id!==n.id?t:e}))),U("sucess"),I("Updated ".concat(s,"'s phone number.")),setTimeout((function(){return I(null)}),5e3)})).catch((function(e){U("failure"),e.response.data.error.includes("number")?I("Number needs to be greater than 8 digits."):I("Information of ".concat(s," has already been removed from the server.")),b(""),C(""),setTimeout((function(){return I(null)}),5e3)}))}}else{l({name:s,number:w}).then((function(e){r(t.concat(e)),U("sucess"),I("Added ".concat(s,".")),setTimeout((function(){return I(null)}),5e3)})).catch((function(e){var n=e.response.data;U("failure"),n.error.includes("number")&&n.error.includes("name")?I("Name needs to be greater than 3 characters and Number needs to be greater than 8 digits."):n.error.includes("number")?I("Number needs to be greater than 8 digits."):I("Name needs to be greater than 3  characters."),setTimeout((function(){return I(null)}),5e3)}))}b(""),C("")}}),Object(m.jsx)(p,{title:"Numbers"}),q.map((function(e){return Object(m.jsx)(O,{item:e,persons:t,setPersons:r},e.name)}))]})};t(39);a.a.render(Object(m.jsx)(x,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.2ea19e45.chunk.js.map